<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>MAPPING VTC</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
	<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
	<link rel="stylesheet" href="../assets/css/ready.css">
	<link rel="stylesheet" href="../assets/css/demo.css">
	<link rel="stylesheet" href="../css/base.css">
	
	<!-- my leaflet imports -->
	<link rel="stylesheet" href="../css/leaflet.css">
        <link rel="stylesheet" href="../css/qgis2web.css"><link rel="stylesheet" href="../css/fontawesome-all.min.css">
        <link rel="stylesheet" href="../css/MarkerCluster.css">
        <link rel="stylesheet" href="../css/MarkerCluster.Default.css">
        <link rel="stylesheet" href="../css/leaflet-control-geocoder.Geocoder.css">
		<link rel="stylesheet" href="../css/leaflet-measure.css">
		
	<!-- my custom style -->
	<style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>

</head>
<body>
	<!-- <div class="wrapper"> -->
		<!-- <div class="main-header"> -->
			<!-- <div class="logo-header">
				<a href="index.html" class="logo">
					Mapping VTC
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<button class="topbar-toggler more"><i class="la la-ellipsis-v"></i></button>
			</div>
			 -->
			</div>
			<!-- <div class="sidebar"> -->
				<!-- <div class="scrollbar-inner sidebar-wrapper"> -->
					<!-- <ul class="nav"> -->
						

						<!-- our toggle buttons -->
						
						<!-- <label for="male">Male</label><br>
						<input type="radio" id="male" name="gender" value="male"> -->


						<!-- my images should occupy this area -->


						<!-- <li class="nav-item active">
							<a href="index.html">
								<i class="la la-dashboard"></i>
								<p>Dashboard</p>
								<span class="badge badge-count">5</span>
							</a>
						</li> -->
						
					<!-- </ul> -->
				<!-- </div> -->
			<!-- </div> -->
			
			<!-- <div class="main-panel"> -->
				<div class="content">
					<div class="container-fluid">
						<h4 class="page-title">Dashboard</h4>
						<div class="row">
							<div class="col-md-4">
								<div class="card card-stats card-warning">
									<div class="card-body ">
										<div class="row">
											<div class="col-5">
												<div class="icon-big text-center">
													<i class="fa fa-university"></i>
												</div>
											</div>
											<div class="col-7 d-flex align-items-center">
												<div class="numbers">
													<p class="card-category">Need of support but eliminated</p>
													<h4 class="card-title" id="need">6</h4>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="card card-stats card-success">
									<div class="card-body ">
										<div class="row">
											<div class="col-5">
												<div class="icon-big text-center">
													<i class="fa fa-university"></i>
												</div>
											</div>
											<div class="col-7 d-flex align-items-center">
												<div class="numbers">
													<p class="card-category">Qualify for support</p>
													<h4 class="card-title" id="qualify">7</h4>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="card card-stats card-danger">
									<div class="card-body">
										<div class="row">
											<div class="col-5">
												<div class="icon-big text-center">
													<i class="fa fa-university"></i>
												</div>
											</div>
											<div class="col-7 d-flex align-items-center">
												<div class="numbers">
													<p class="card-category">Not to be considered for support</p>
													<h4 class="card-title" id="considered">19</h4>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="card">
									<div class="card-header">
										<h4 class="card-title">Western Region</h4>
										<p class="card-category">
										Distribution of Vocational Training Centers</p>
									</div>
									<div class="card-body">
										<div class="btn-group">
											<button type="button" id="kisumu" class="btn btn-outline-primary">Kisumu</button>
											<button type="button" id="siaya" class="btn btn-outline-secondary">Siaya</button>
											<button type="button" id="homabay" class="btn btn-outline-success">Homabay</button>
											<button type="button" id="migori" class="btn btn-outline-danger">Migori</button>
											<button type="button" id="vihiga" class="btn btn-outline-warning">Vihiga</button>
											<button type="button" id="all" class="btn btn-outline-info">All</button>
										</div>
										<div  id="map">
											
											<div class="map" style="height: 600px;">
												<span>Alternative content for the map</span>
												
											</div>
											
										</div>
									</div>
								</div>
							</div>
						</div>


						<!-- <div class="input-group">
							<input type="radio"  name="my_filter" value="ALL" checked>ALL
							<input type="radio"  name="my_filter" value="kisumu" >kisumu
							<input type="radio"  name="my_filter" value="Siaya" >siaya
							<div class="input-group">
								<div class="input-group-prepend">
								  <div class="input-group-text">
								  <input type="radio" aria-label="Radio button for following text input">
								  </div>
								</div>
								<input type="radio" class="form-control" aria-label="Text input with radio button">ALL
							  </div> -->

							  <!-- <div class="input-group">
								<div class="input-group-prepend">
								  <div class="input-group-text">
								  <input type="radio" aria-label="Radio button for following text input">
								  </div>
								</div>
								<input type="radio" name="my_filter" value="kisumu" aria-label="Text input with radio button">kisumu
							  </div> -->
						</div>
						
						
					</div>
				</div>
				<footer class="footer">
					<div class="container-fluid">
						<nav class="pull-left">
							<ul class="nav">
								<li class="nav-item">
									<a class="nav-link" href="http://geomird.co.ke">
										geomird
									</a>
								</li>
								
							</ul>
						</nav>
						<div class="copyright ml-auto">
							2021, made by <a href="https://www.geomird.ke">geomird</a>
						</div>				
					</div>
				</footer>
			<!-- </div> -->
		<!-- </div> -->
	<!-- </div> -->
	<script src="../assets/js/underscore-min.js"></script>
	<script src="../assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="../assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="../js/qgis2web_expressions.js"></script>
	<script src="../js/leaflet.js"></script>
	<script src="../js/leaflet-svg-shape-markers.min.js"></script>
	<script src="../js/leaflet.rotatedMarker.js"></script>
	<script src="../js/leaflet.pattern.js"></script>
	<script src="../js/leaflet-hash.js"></script>
	<script src="../js/Autolinker.min.js"></script>
	<script src="../js/rbush.min.js"></script>
	<script src="../js/labelgun.min.js"></script>
	<script src="../js/labels.js"></script>
	<script src="../js/leaflet-control-geocoder.Geocoder.js"></script>
	<script src="../js/leaflet-measure.js"></script>
	<script src="../js/leaflet.markercluster.js"></script>
	<script src="../js/leaflet.ajax.min.js"></script>
    <script src="../js/leaflet.ajax.js"></script>
     <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
     <script src="../js/leaflet.ajax.js"></script>
	<script src="../data/vtc_01_1.js"></script>
	<script src="../assets/js/search.js"></script>
	<script>
	var items = [];
	var highlightLayer;
	function highlightFeature(e) {
		highlightLayer = e.target;

		if (e.target.feature.geometry.type === 'LineString') {
		  highlightLayer.setStyle({
			color: '#ffff00',
		  });
		} else {
		  highlightLayer.setStyle({
			fillColor: '#ffff00',
			fillOpacity: 1
		  });
		}
		highlightLayer.openPopup();
	}
	var map = L.map('map', {
		zoomControl:true, maxZoom:28, minZoom:1
	}).fitBounds([[-0.5202839593750064,33.501681374479155],[0.5646410385416714,34.97832787447917]]);
	var hash = new L.Hash(map);
	map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
	var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
	var measureControl = new L.Control.Measure({
		position: 'topleft',
		primaryLengthUnit: 'meters',
		secondaryLengthUnit: 'kilometers',
		primaryAreaUnit: 'sqmeters',
		secondaryAreaUnit: 'hectares'
	});
	measureControl.addTo(map);
	document.getElementsByClassName('leaflet-control-measure-toggle')[0]
	.innerHTML = '';
	document.getElementsByClassName('leaflet-control-measure-toggle')[0]
	.className += ' fas fa-ruler';
	var bounds_group = new L.featureGroup([]);
	function setBounds() {
	}
	map.createPane('pane_OpenStreetMap_0');
	map.getPane('pane_OpenStreetMap_0').style.zIndex = 400;
	var layer_OpenStreetMap_0 = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		pane: 'pane_OpenStreetMap_0',
		opacity: 1.0,
		attribution: '',
		minZoom: 1,
		maxZoom: 28,
		minNativeZoom: 0,
		maxNativeZoom: 19
	});
	layer_OpenStreetMap_0;
	map.addLayer(layer_OpenStreetMap_0);
	function pop_vtc_01_1(feature, layer) {
		items.push(layer);
		console.log(items);
		layer.on({
			mouseout: function(e) {
				for (i in e.target._eventParents) {
					e.target._eventParents[i].resetStyle(e.target);
				}
				if (typeof layer.closePopup == 'function') {
					layer.closePopup();
				} else {
					layer.eachLayer(function(feature){
						feature.closePopup()
					});
				}
			},
			mouseover: highlightFeature,
		});
		// <img src='"+entry[0]+"&previewImage=true'</img>
		var popupContent =
		 '<table>\
				<tr>\
					<img class="card-img-top height:50px;" src='+feature.properties['image_url1']+'> \
				</tr>\
				<tr>\
					<th scope="row">Name</th>\
					<td>' + (feature.properties['name'] !== null ? autolinker.link(feature.properties['name'].toLocaleString()) : '') + '</td>\
				</tr>\
				<tr>\
					<th scope="row">County</th>\
					<td>' + (feature.properties['county'] !== null ? autolinker.link(feature.properties['county'].toLocaleString()) : '') + '</td>\
				</tr>\
				<tr>\
					<th scope="row">Contact <br> person</th>\
					<td>' + (feature.properties['contact pe'] !== null ? autolinker.link(feature.properties['contact pe'].toLocaleString()) : '') + '</td>\
				</tr>\
				<tr>\
					<th scope="row">rank</th>\
					<td>' + (feature.properties['rank'] !== null ? autolinker.link(feature.properties['rank'].toLocaleString()) : '') + '</td>\
				</tr>\
				<tr>\
					<th scope="row">Phone</th>\
					<td>' + (feature.properties['phone'] !== null ? autolinker.link(feature.properties['phone'].toLocaleString()) : '') + '</td>\
				</tr>\
				<tr>\
					<th scope="row">Email</th>\
					<td>' + (feature.properties['email'] !== null ? autolinker.link(feature.properties['email'].toLocaleString()) : '') + '</td>\
				</tr>\
			</table>';
		layer.bindPopup(popupContent, {maxHeight: 400});
	}

	function style_vtc_01_1_0(feature) {
		switch(String(feature.properties['color code'])) {
			case 'green':
				return {
			pane: 'pane_vtc_01_1',
			shape: 'diamond',
			radius: 8.8,
			opacity: 1,
			color: 'rgba(61,128,53,1.0)',
			dashArray: '',
			lineCap: 'butt',
			lineJoin: 'miter',
			weight: 2.0,
			fill: true,
			fillOpacity: 1,
			fillColor: 'rgba(84,176,74,1.0)',
			interactive: true,
		}
				break;
			case 'orange':
				return {
			pane: 'pane_vtc_01_1',
			shape: 'circle',
			radius: 8.0,
			opacity: 1,
			color: 'rgba(179,92,21,1.0)',
			dashArray: '',
			lineCap: 'butt',
			lineJoin: 'miter',
			weight: 2.0,
			fill: true,
			fillOpacity: 1,
			fillColor: 'rgba(247,128,30,1.0)',
			interactive: true,
		}
				break;
			case 'red':
				return {
			pane: 'pane_vtc_01_1',
			shape: 'diamond',
			radius: 8.8,
			opacity: 1,
			color: 'rgba(128,17,25,1.0)',
			dashArray: '',
			lineCap: 'butt',
			lineJoin: 'miter',
			weight: 2.0,
			fill: true,
			fillOpacity: 1,
			fillColor: 'rgba(219,30,42,1.0)',
			interactive: true,
		}
				break;
		}
	
	}
	map.createPane('pane_vtc_01_1');
	map.getPane('pane_vtc_01_1').style.zIndex = 401;
	map.getPane('pane_vtc_01_1').style['mix-blend-mode'] = 'normal';


	// data is loaded at this point

	// var layer_vtc_01_1 = new L.geoJson(json_vtc_01_1, {
	// 	attribution: '',
	// 	interactive: true,
	// 	dataVar: 'json_vtc_01_1',
	// 	layerName: 'layer_vtc_01_1',
	// 	pane: 'pane_vtc_01_1',
	// 	onEachFeature: pop_vtc_01_1,
	// 	pointToLayer: function (feature, latlng) {
	// 		var context = {
	// 			feature: feature,
	// 			variables: {}
	// 		};
	// 		return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
	// 	},
	// });

	// using ajax

	// var json_layer = new L.geoJSON.ajax('../data/json_d.json', {
    //         attribution: 'geomird',
    //         interactive: true,
    //         // dataVar: 'json_vtc_01_1',
    //         layerName: 'layer_vtc_01_1',
    //         pane: 'pane_vtc_01_1',
    //         onEachFeature: pop_vtc_01_1,
    //         pointToLayer: function (feature, latlng) {
    //             var context = {
    //                 feature: feature,
    //                 variables: {}
    //             };
    //             return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
    //         }, filter:filter_
	// 	}).addTo(map)
	// 	console.log(json_layer)


	var promise = $.getJSON("../data/json_d.json");
        promise.then(function(data) {
        var all_data = L.geoJson(data, {
			attribution: 'geomird',
					interactive: true,
					dataVar: 'json_vtc_01_1',
					layerName: 'layer_vtc_01_1',
					pane: 'pane_vtc_01_1',
					onEachFeature: pop_vtc_01_1,
					pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
		});
                var kisumu = L.geoJson(data, {
					attribution: 'geomird',
					interactive: true,
					dataVar: 'json_vtc_01_1',
					layerName: 'layer_vtc_01_1',
					pane: 'pane_vtc_01_1',
					onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "kisumu";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
        });
        var Siaya = L.geoJson(data, {
			attribution: 'geomird',
            interactive: true,
            dataVar: 'json_vtc_01_1',
            layerName: 'layer_vtc_01_1',
            pane: 'pane_vtc_01_1',
            onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "Siaya";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
        });

        var homabay = L.geoJson(data, {
			attribution: 'geomird',
            interactive: true,
            dataVar: 'json_vtc_01_1',
            layerName: 'layer_vtc_01_1',
            pane: 'pane_vtc_01_1',
            onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "Homabay";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
        });

        var siaya = L.geoJson(data, {
			attribution: 'geomird',
            interactive: true,
            dataVar: 'json_vtc_01_1',
            layerName: 'layer_vtc_01_1',
            pane: 'pane_vtc_01_1',
            onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "Siaya";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
        });

        var migori = L.geoJson(data, {
			attribution: 'geomird',
            interactive: true,
            dataVar: 'json_vtc_01_1',
            layerName: 'layer_vtc_01_1',
            pane: 'pane_vtc_01_1',
            onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "Migori";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
		});
		
		var vihiga = L.geoJson(data, {
			attribution: 'geomird',
            interactive: true,
            dataVar: 'json_vtc_01_1',
            layerName: 'layer_vtc_01_1',
            pane: 'pane_vtc_01_1',
            onEachFeature: pop_vtc_01_1,
            filter: function(feature, layer) {
                return feature.properties.county == "Vihiga";
            },
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_vtc_01_1_0(feature));
            }
        });

        map.fitBounds(all_data.getBounds(), {
            padding: [50, 50]
		});
		all_data.addTo(map)
        // kisumu.addTo(map)
        // Siaya.addTo(map)
        // homabay.addTo(map)
        // vihiga.addTo(map)
        // migori.addTo(map)
        // The JavaScript below is new
        $("#kisumu").click(function() {
            map.addLayer(kisumu)
            map.removeLayer(siaya)
            map.removeLayer(homabay)
            map.removeLayer(vihiga)
			map.removeLayer(migori)
			map.removeLayer(all_data)
        });
        $("#siaya").click(function() {
            map.addLayer(siaya)
            map.removeLayer(kisumu)
            map.removeLayer(homabay)
            map.removeLayer(vihiga)
			map.removeLayer(migori)
			map.removeLayer(all_data)
        });
        $("#homabay").click(function() {
            map.addLayer(homabay)
            map.removeLayer(kisumu)
            map.removeLayer(siaya)
            map.removeLayer(vihiga)
			map.removeLayer(migori)
			map.removeLayer(all_data)
        });

        $("#migori").click(function() {
            map.addLayer(migori)
            map.removeLayer(kisumu)
            map.removeLayer(homabay)
            map.removeLayer(vihiga)
			map.removeLayer(siaya)
			map.removeLayer(all_data)
		});
		
		$("#vihiga").click(function() {
            map.addLayer(vihiga)
            map.removeLayer(kisumu)
            map.removeLayer(siaya)
            map.removeLayer(homabay)
			map.removeLayer(migori)
			map.removeLayer(all_data)
		});

		$("#all").click(function() {
            map.addLayer(all_data)
            map.removeLayer(kisumu)
            map.removeLayer(siaya)
            map.removeLayer(homabay)
			map.removeLayer(migori)
			map.removeLayer(vihiga)
		});
		
	// 	var cluster_vtc_01_1 = new L.MarkerClusterGroup({showCoverageOnHover: false,
	// 	spiderfyDistanceMultiplier: 2});
	// cluster_vtc_01_1.addLayer(all_data);

	// bounds_group.addLayer(all_data);
	// cluster_vtc_01_1.addTo(map);
	// var osmGeocoder = new L.Control.Geocoder({
	// 	collapsed: true,
	// 	position: 'topright',
	// 	text: 'Search',
	// 	title: 'Testing'
	// }).addTo(map);

	// search controls
	L.Control.search({
	    data: items,
	    // moveToLocation: function(latlng, title, map) {
        // 	map.setView(latlng, 7);    // set the zoom
    	// }
	 }).addTo(map);



	//  modification

	var cluster_vtc_01_1 = new L.MarkerClusterGroup({showCoverageOnHover: false,
		spiderfyDistanceMultiplier: 2});
	// cluster_vtc_01_1.addLayer(all_data);

	 
	bounds_group.addLayer(all_data);
	cluster_vtc_01_1.addTo(map);
	var osmGeocoder = new L.Control.Geocoder({
		collapsed: true,
		position: 'topright',
		text: 'Search',
		title: 'Testing'
	}).addTo(map);

	document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
	.className += ' fa fa-search';
	document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
	.title += 'Search for a place';
	var baseMaps = {};
	L.control.layers(baseMaps,{'vtc_01<br /><table><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_qualifyingforsupport0.png" /></td><td>qualifying for support</td></tr><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_needofsupportbuteliminated1.png" /></td><td>need of support but eliminated</td></tr><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_nottobeconsideredforsupport2.png" /></td><td>not to be considered for support</td></tr></table>': cluster_vtc_01_1,"OpenStreetMap": layer_OpenStreetMap_0,},{collapsed:true}).addTo(map);
	setBounds();
	var i = 0;
	all_data.eachLayer(function(layer) {
		var context = {
			feature: layer.feature,
			variables: {}
		};
		layer.bindTooltip((layer.feature.properties['name'] !== null?String('<div style="color: #000000; font-size: 10pt; font-family: \'Chilanka\', sans-serif;">' + layer.feature.properties['name']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_vtc_01_1'});
		labels.push(layer);
		totalMarkers += 1;
		  layer.added = true;
		  addLabel(layer, i);
		  i++;
	});
	resetLabels([all_data]);
	map.on("zoomend", function(){
		resetLabels([all_data]);
	});
	map.on("layeradd", function(){
		resetLabels([all_data]);
	});
	map.on("layerremove", function(){
		resetLabels([all_data]);
	});



    });

	// end of json layers end end end end end end end end end end end end

	



	// var cluster_vtc_01_1 = new L.MarkerClusterGroup({showCoverageOnHover: false,
	// 	spiderfyDistanceMultiplier: 2});
	// cluster_vtc_01_1.addLayer(all_data);

	// bounds_group.addLayer(all_data);
	// cluster_vtc_01_1.addTo(map);
	// var osmGeocoder = new L.Control.Geocoder({
	// 	collapsed: true,
	// 	position: 'topright',
	// 	text: 'Search',
	// 	title: 'Testing'
	// }).addTo(map);




	// document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
	// .className += ' fa fa-search';
	// document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
	// .title += 'Search for a place';
	// var baseMaps = {};
	// L.control.layers(baseMaps,{'vtc_01<br /><table><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_qualifyingforsupport0.png" /></td><td>qualifying for support</td></tr><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_needofsupportbuteliminated1.png" /></td><td>need of support but eliminated</td></tr><tr><td style="text-align: center;"><img src="../legend/vtc_01_1_nottobeconsideredforsupport2.png" /></td><td>not to be considered for support</td></tr></table>': cluster_vtc_01_1,"OpenStreetMap": layer_OpenStreetMap_0,},{collapsed:true}).addTo(map);
	// setBounds();
	// var i = 0;
	// all_data.eachLayer(function(layer) {
	// 	var context = {
	// 		feature: layer.feature,
	// 		variables: {}
	// 	};
	// 	layer.bindTooltip((layer.feature.properties['name'] !== null?String('<div style="color: #000000; font-size: 10pt; font-family: \'Chilanka\', sans-serif;">' + layer.feature.properties['name']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_vtc_01_1'});
	// 	labels.push(layer);
	// 	totalMarkers += 1;
	// 	  layer.added = true;
	// 	  addLabel(layer, i);
	// 	  i++;
	// });
	// resetLabels([all_data]);
	// map.on("zoomend", function(){
	// 	resetLabels([all_data]);
	// });
	// map.on("layeradd", function(){
	// 	resetLabels([all_data]);
	// });
	// map.on("layerremove", function(){
	// 	resetLabels([all_data]);
	// });
	// // console.log(json_layer.features.length)



	// function filter_(json){
    //         var att = json.properties.county;
    //         console.log(att)
	// 		var optfilter = $("input[name=my_filter]:checked").val();

	// 		// console.log(optfilter)
    //         if (optfilter == 'ALL'){
	// 			return true;
	// 		} 
	// 		if (optfilter == 'kisumu'){
	// 			return json.properties['county'] == kisumu;
	// 		}

	// 		else 
	// 		{
    //             // console.log(optfilter)
    //             return att.status == optfilter;
    //             // return feature.properties.county == optfilter;
    //         }
    //     }

    //     $("input[name=my_filter]").click(function(){
    //         my_ids = [];
    //         json_layer.refresh();
	// 	});
		
	// 	marker.on('click', function(ev){
	// 		var latlng = map.mouseEventToLatLng(ev.originalEvent);
	// 		console.log(latlng.lat + ', ' + latlng.lng);
	// 	});

	// inserting sums into html
	
	</script>
</body>
<!-- <script src="../assets/js/core/jquery.3.2.1.min.js"></script> -->
<!-- <script src="../assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script> -->
<!-- <script src="../assets/js/core/popper.min.js"></script> -->
<script src="../assets/js/core/bootstrap.min.js"></script>
<!-- <script src="../assets/js/plugin/chartist/chartist.min.js"></script> -->
<!-- <script src="../assets/js/plugin/chartist/plugin/chartist-plugin-tooltip.min.js"></script> -->
<!-- <script src="../assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script> -->
<!-- <script src="../assets/js/plugin/bootstrap-toggle/bootstrap-toggle.min.js"></script> -->
<!-- <script src="../assets/js/plugin/jquery-mapael/jquery.mapael.min.js"></script> -->
<!-- <script src="../assets/js/plugin/jquery-mapael/maps/world_countries.min.js"></script> -->
<!-- <script src="../assets/js/plugin/chart-circle/circles.min.js"></script> -->
<!-- <script src="../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script> -->
<!-- <script src="../assets/js/ready.min.js"></script> -->
<!-- <script src="../assets/js/demo.js"></script> -->
</html>